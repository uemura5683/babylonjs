<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Babylon.js Viewer 3 Example</title>
    <style type="text/css">
      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
      }
      #renderCanvas {
        width   : 100%;
        height  : 100%;
        touch-action: none;
      }
    </style>
  </head>
  <body>
    <canvas id="renderCanvas"></canvas>

    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>
    <script type="text/javascript">
      function main() {
        const canvas = document.getElementById('renderCanvas');
        const engine = new BABYLON.Engine(canvas);
        function createScene() {
          const scene = new BABYLON.Scene(engine);
          const camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2.5, 15, new BABYLON.Vector3(0, 0, 0));
          camera.attachControl(canvas, true);
          const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(1, 1, 0));
          // boxを作成する
          const box1 = new BABYLON.MeshBuilder.CreateBox("box1", {width: 2, height: 1.5, depth: 3});
          box1.position.y = 0.75;

          const box2 = new BABYLON.MeshBuilder.CreateBox("box2", {});
          box2.scaling.x = 2;
          box2.scaling.y = 1.5;
          box2.scaling.z = 3;

          box2.position = new BABYLON.Vector3(-3, 0.75, 0);

          const box3 = new BABYLON.MeshBuilder.CreateBox("box3", {});
          box3.scaling = new BABYLON.Vector3(2, 1.5, 3);

          box3.position.x = 3;
          box3.position.y = 0.75;
          box3.position.z = 0;

          const box4 = new BABYLON.MeshBuilder.CreateBox("box4", {width: 2, height: 1.5, depth: 3});
          box4.position = new BABYLON.Vector3(0, 0.75, 3);
          box4.rotation.y = Math.PI / 2;

          // 地面
          const grand = new BABYLON.MeshBuilder.CreateGround("ground", {width:10, height:10});

          // 曲を作る url to sound file 曲を入れる
          // https://zenn.dev/chomado/books/babylonjs-tutorial-ja/viewer/2-02
          // const sound = new BABYLON.Sound("name", "url to sound file", scene, null, {loop: true, autoplay: true});
          // sound.play();

          // 3秒ごとに曲を鳴らす
          // const bounce = new BABYLON.Sound("bounce", "sounds/bounce.wav", scene);
          // setInterval(() => bounce.play(), 3000);


          return scene;  
        }

        const scene = createScene();

        engine.runRenderLoop(() => {
          scene.render();
        });

        window.addEventListener('resize', () => {
          engine.resize();
        });
      }
      window.addEventListener('DOMContentLoaded', main);
    </script>
  </body>
</html>
