<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <style type="text/css">
        html, body {
          width: 100%;
          height: 100%;
          overflow: hidden;
          margin: 0;
        }
        #renderCanvas {
          width   : 100%;
          height  : 100%;
          touch-action: none;
        }
    </style>
  </head>
  <body>
    <canvas id="renderCanvas"></canvas>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/materialsLibrary/babylon.gridMaterial.js"></script>
    <script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>
    <script src="https://unpkg.com/earcut@latest/dist/earcut.min.js"></script>
    <script type="text/javascript">

      function main() {
        const canvas = document.getElementById('renderCanvas');
        const engine = new BABYLON.Engine(canvas);

        var createScene = function() {
          var scene = new BABYLON.Scene(engine);
	
          var light1 = new BABYLON.HemisphericLight("DirectionalLight", new BABYLON.Vector3(0, -1, 0), scene);
          var light2 = new BABYLON.HemisphericLight("HemiLight", new BABYLON.Vector3(0, 1, -1), scene);   
          light1.intensity =1;
          light2.intensity =1; 

          var frameRate = 20;

          /*********performers*********/
          //camera
          //var camera = new BABYLON.UniversalCamera("UniversalCamera", new BABYLON.Vector3(0, 3, -30), scene);
          
          const camera = new BABYLON.ArcRotateCamera("Camera", 0, 0, 0, BABYLON.Vector3.Zero(), scene);
          camera.position = new BABYLON.Vector3(50, 25, 57.5);
          camera.setTarget(new BABYLON.Vector3(-20/2, 0, -7.5/2));          
          
          camera.attachControl(canvas, true);
          
          //door
          const door_texture = new BABYLON.StandardMaterial("");
          door_texture.diffuseTexture = new BABYLON.Texture("texture/door.png");
          const door =  BABYLON.MeshBuilder.CreateBox("door", {width:3, height:4, depth:0.2}, scene);
          const hinge = BABYLON.MeshBuilder.CreateBox("hinge", {}, scene)
          hinge.isVisible = false;
          door.parent = hinge;
          hinge.position.y = 2;
          door.position.x = -1;

          door.material = door_texture;          

          //one door          
          const door_texture_one = new BABYLON.StandardMaterial("");
          door_texture_one.diffuseTexture = new BABYLON.Texture("texture/door.png");

          const door1_1 =  BABYLON.MeshBuilder.CreateBox("door", {width:2, height:4, depth:0.2}, scene);
          door1_1.rotation.y = Math.PI/2;
          door1_1.position.x = -3.65;
          door1_1.position.y = 2;
          door1_1.position.z = 10;

          const door1_2 = door1_1.clone();
          door1_2.position.z = 6;

          const door1_3 = door1_2.clone();
          door1_3.rotation.y = -Math.PI;
          door1_3.position.x = -9.5;
          door1_3.position.z = 8;

          const door1_4 = door1_1.clone();
          door1_4.position.x = 1.35;
          door1_4.position.z = 4.8;

          const door1_5 = door1_1.clone();
          door1_5.position.x = -9.1;
          door1_5.position.z = 23.5;

          door1_1.material = door1_2.material = door1_3.material = door1_4.material = door1_5.material = door_texture_one;


          //two door
          const door_texture_two = new BABYLON.StandardMaterial("");
          door_texture_two.diffuseTexture = new BABYLON.Texture("texture/door.png");
          door_texture_two.diffuseTexture.uScale = 2;
          door_texture_two.diffuseTexture.vScale = 1;  

          const door2_1 =  BABYLON.MeshBuilder.CreateBox("door", {width:4, height:4, depth:0.2}, scene);
          door2_1.rotation.y = Math.PI/2;
          door2_1.position.x = -3.65;
          door2_1.position.y = 2;
          door2_1.position.z = 19;

          const door2_2 = door2_1.clone();
          door2_2.position.z = 29;

          door2_1.material = door2_2.material = door_texture_two;          

          // one dooe2
          const door_texture_one_type2 = new BABYLON.StandardMaterial("");
          door_texture_one_type2.diffuseTexture = new BABYLON.Texture("texture/door3.png");

          const door3_1 =  BABYLON.MeshBuilder.CreateBox("door", {width:3, height:4, depth:0.2}, scene);
          door3_1.rotation.y = Math.PI/2;
          door3_1.position.x = 1.35;
          door3_1.position.y = 2;
          door3_1.position.z = 2;
          
          door3_1.material = door_texture_one_type2;  

          // two dooe2
          const door_texture_two_type2 = new BABYLON.StandardMaterial("");
          door_texture_two_type2.diffuseTexture = new BABYLON.Texture("texture/door2.png");

          const door4_1 =  BABYLON.MeshBuilder.CreateBox("door", {width:4, height:4, depth:0.2}, scene);
          door4_1.rotation.y = Math.PI/2;
          door4_1.position.x = 1.35;
          door4_1.position.y = 2;
          door4_1.position.z = 8.1;
          
          door4_1.material = door_texture_two_type2;  

          // bath dooe2
          const door_texture_bath = new BABYLON.StandardMaterial("");
          door_texture_bath.diffuseTexture = new BABYLON.Texture("texture/bath_door.png");

          const door5_1 =  BABYLON.MeshBuilder.CreateBox("door", {width:2.5, height:4, depth:0.2}, scene);
          door5_1.position.x = 3.65;
          door5_1.position.y = 2;
          door5_1.position.z = 6;
          
          door5_1.material = door_texture_bath;


          const door_texture_bathcloset = new BABYLON.StandardMaterial("");
          door_texture_bathcloset.diffuseTexture = new BABYLON.Texture("texture/bath_closet.png");

          door_texture_bathcloset.diffuseTexture.uScale = 1;
          door_texture_bathcloset.diffuseTexture.vScale = 2;            

          const door6_1 =  BABYLON.MeshBuilder.CreateBox("door", {width:1.5, height:6, depth:0.2}, scene);
          door6_1.position.x = 5.9;
          door6_1.position.y = 3;
          door6_1.position.z = 2;
          
          door6_1.material = door_texture_bathcloset;

          //lights
          //light positions
          // var sphereLight = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 0.2}, scene);
          // sphereLight.material = new BABYLON.StandardMaterial("", scene);
          // sphereLight.material.emissiveColor = new BABYLON.Color3(1, 1, 1);
          // sphereLight.position.x = 2;
          // sphereLight.position.y = 3;
          // sphereLight.position.z = 0.1;

          // sphereLights = [sphereLight];
          // lightPositions = [-2, 3, 6.9]

          for(var i = 0; i < 1; i++) {

          //     sphereLights.push(sphereLight.clone(""));
          //     sphereLights[i + 1].position = new BABYLON.Vector3(lightPositions[3*i], lightPositions[3*i + 1], lightPositions[3*i + 2])
          
          // var spotLights = [];
          // var lightDirections = [-0.5, -0.25, 1, 0, 0, -1]
          // for(var i = 0; i < sphereLights.length; i++) {
          //   spotLights[i] = new BABYLON.SpotLight("spotlight" + i, sphereLights[i].position, new BABYLON.Vector3(lightDirections[3*i], lightDirections[3*i + 1], lightDirections[3*i + 2]), Math.PI / 8, 5, scene);
          //   spotLights[i].diffuse = new BABYLON.Color3(1, 1, 1);
          //   spotLights[i].specular = new BABYLON.Color3(0.5, 0.5, 0.5);
          //   spotLights[i].intensity = 0;
          // }

          /*********animations*************/
          // for camera to sweep round
          // var rotate = new BABYLON.Animation("rotate", "rotation.y", frameRate, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);
          
          // var rotate_keys = []; 

          //   rotate_keys.push({
          //       frame: 0,
          //       value: 0
          //   });

          //   rotate_keys.push({
          //       frame: 11 * frameRate,
          //       value: 0
          //   });

          //   rotate_keys.push({
          //       frame: 16 * frameRate,
          //       value: Math. PI
          //   });

          //   rotate.setKeys(rotate_keys);
          
          //   //for camera move forward
          //   var movein = new BABYLON.Animation("movein", "position", frameRate, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);
            
          //   var movein_keys = []; 

          //   movein_keys.push({
          //       frame: 0,
          //       value: new BABYLON.Vector3(0, 5, -30)
          //   });

          //   movein_keys.push({
          //       frame: 3 * frameRate,
          //       value: new BABYLON.Vector3(0, 2, -10)
          //   });

          //   movein_keys.push({
          //       frame: 5 * frameRate,
          //       value: new BABYLON.Vector3(0, 2, -10)
          //   });

          //   movein_keys.push({
          //       frame: 8 * frameRate,
          //       value: new BABYLON.Vector3(-2, 2, 3)
          //   });

          //   movein_keys.push({
          //       frame: 11 * frameRate,
          //       value: new BABYLON.Vector3(0, 2, 25)
          //   });

          //   movein.setKeys(movein_keys);

          
          //   //for door to open and close
          //   var sweep = new BABYLON.Animation("sweep", "rotation.y", frameRate, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);

          //   var sweep_keys = []; 

          //   sweep_keys.push({
          //       frame: 0,
          //       value: 0
          //   });

          //   sweep_keys.push({
          //       frame: 3 * frameRate,
          //       value: 0
          //   });

          //   sweep_keys.push({
          //       frame: 5 * frameRate,
          //       value: Math.PI/3
          //   });

          //   sweep_keys.push({
          //       frame: 17 * frameRate,
          //       value: Math.PI/3
          //   });

          //   sweep_keys.push({
          //       frame: 19 * frameRate,
          //       value: 0
          //   });

          //   sweep.setKeys(sweep_keys);
          
          //   /*******Run Clips**********/

          //   scene.beginDirectAnimation(camera, [movein, rotate], 0, 25 * frameRate, false);
          //   scene.beginDirectAnimation(hinge, [sweep], 0, 25 * frameRate, false);

            /**************Peripherals of Scene***************/

            // floor
            const floor_texture = new BABYLON.StandardMaterial("");
            floor_texture.diffuseTexture = new BABYLON.Texture("texture/floor.png");
            floor_texture.diffuseTexture.uScale = 6;
            floor_texture.diffuseTexture.vScale = 6;     

            const ground = BABYLON.MeshBuilder.CreateGround("ground", {width:30, height:60}, scene);
            ground.position.z = 10;            
            ground.material = floor_texture;            

            const bathinnerfloor_texture = new BABYLON.StandardMaterial("");
            bathinnerfloor_texture.diffuseTexture = new BABYLON.Texture("texture/bath_floor.png");
            bathinnerfloor_texture.diffuseTexture.uScale = 18;
            bathinnerfloor_texture.diffuseTexture.vScale = 18;     

            const bathinnerground = BABYLON.MeshBuilder.CreateGround("ground", {width:6.8, height:5.5}, scene);
            bathinnerground.position.x = 5.6;
            bathinnerground.position.y = .1;            
            bathinnerground.position.z = 8.7;
            bathinnerground.material = bathinnerfloor_texture;

            const bathouterfloor_texture = new BABYLON.StandardMaterial("");
            bathouterfloor_texture.diffuseTexture = new BABYLON.Texture("texture/toilet_floor.png");
            bathouterfloor_texture.diffuseTexture.uScale = 6;
            bathouterfloor_texture.diffuseTexture.vScale = 3;

            const bathouterground = BABYLON.MeshBuilder.CreateGround("ground", {width:8, height:6}, scene);
            bathouterground.position.x = 5.2;
            bathouterground.position.y = .1;
            bathouterground.position.z = 3;
            bathouterground.material = bathouterfloor_texture;    

            const toiletfloor_texture = new BABYLON.StandardMaterial("");
            toiletfloor_texture.diffuseTexture = new BABYLON.Texture("texture/toilet_floor.png");
            toiletfloor_texture.diffuseTexture.uScale = 3;
            toiletfloor_texture.diffuseTexture.vScale = 3;

            const toiletground = BABYLON.MeshBuilder.CreateGround("ground", {width:3.2, height:6}, scene);
            toiletground.position.x = -5.4;
            toiletground.position.y = .1;
            toiletground.position.z = 5;
            toiletground.material = toiletfloor_texture;

            const entrance_texture = new BABYLON.StandardMaterial("");
            entrance_texture.diffuseTexture = new BABYLON.Texture("texture/entrance_floor.png");
            entrance_texture.diffuseTexture.uScale = 5;
            entrance_texture.diffuseTexture.vScale = 4;

            const entranceground = BABYLON.MeshBuilder.CreateGround("ground", {width:5, height:4}, scene);
            entranceground.position.x = -1.3;
            entranceground.position.y = .1;
            entranceground.position.z = 2;
            entranceground.material = entrance_texture;


            const shoescloset_texture = new BABYLON.StandardMaterial("");
            shoescloset_texture.diffuseTexture = new BABYLON.Texture("texture/shoescloset.png");

            const shoesclosetground = BABYLON.MeshBuilder.CreateGround("ground", {width:1.5, height:3.5}, scene);
            shoesclosetground.position.x = 2.3;
            shoesclosetground.position.y = .2;
            shoesclosetground.position.z = 1.9;
            shoesclosetground.material = shoescloset_texture;


            // cross
            const cross_material = new BABYLON.StandardMaterial("");
            cross_texture = new BABYLON.Texture("texture/cross.png");
            cross_material.diffuseTexture = cross_texture;
            cross_material.diffuseTexture.uScale = 2;
            cross_material.diffuseTexture.vScale = 2;


            const cross_material_big = new BABYLON.StandardMaterial("");
            cross_texture_big = new BABYLON.Texture("texture/cross.png");
            cross_material_big.diffuseTexture = cross_texture_big;
            cross_material_big.diffuseTexture.uScale = 8;
            cross_material_big.diffuseTexture.vScale = 8;

            // outer wall
            const wall1 = BABYLON.MeshBuilder.CreateBox("cross", {width:8.5, height:6, depth:0.2}, scene);
            wall1.position.x = -6.75;
            wall1.position.y = 3;

            const wall2 = BABYLON.MeshBuilder.CreateBox("cross", {width:8.5, height:6, depth:0.2}, scene);
            wall2.position.x = 4.75;
            wall2.position.y = 3;

            const wall3 = BABYLON.MeshBuilder.CreateBox("cross", {width:3, height:2, depth:0.2}, scene);
            wall3.position.x = -1;
            wall3.position.y = 5;

            const wall4 = BABYLON.MeshBuilder.CreateBox("cross", {width:20, height:6, depth:0.2}, scene);
            wall4.position.x = -1;
            wall4.position.y = 3;
            wall4.position.z = 36;

            const wall5 = BABYLON.MeshBuilder.CreateBox("cross", {width:36, height:6, depth:0.2}, scene);
            wall5.rotation.y = Math.PI/2;
            wall5.position.x = -11;
            wall5.position.y = 3;
            wall5.position.z = 18;

            const wall6 = wall5.clone();
            wall6.rotation.y = Math.PI/2;
            wall6.position.x = 9;
            wall6.position.y = 3;
            wall6.position.z = 18;

            //inner wall
            const wall7 = BABYLON.MeshBuilder.CreateBox("cross", {width:7.2, height:6, depth:0.2}, scene);
            wall7.position.x = -7.5;
            wall7.position.y = 3;
            wall7.position.z = 22;

            const wall8 = BABYLON.MeshBuilder.CreateBox("cross", {width:4.9, height:6, depth:0.2}, scene);
            wall8.position.x = -6;
            wall8.position.y = 3;
            wall8.position.z = 8;

            const wall9 = BABYLON.MeshBuilder.CreateBox("cross", {width:.5, height:6, depth:0.2}, scene);
            wall9.position.x = -10.8;
            wall9.position.y = 3;
            wall9.position.z = 8;

            const wall10 = BABYLON.MeshBuilder.CreateBox("cross", {width:7.25, height:6, depth:3}, scene);
            wall10.position.x = -7.25;
            wall10.position.y = 3;
            wall10.position.z = 1.5;

            const wall11 = BABYLON.MeshBuilder.CreateBox("cross", {width:5, height:6, depth:0.2}, scene);
            wall11.rotation.y = Math.PI/2;
            wall11.position.x = -3.65;
            wall11.position.y = 3;
            wall11.position.z = 2.5;

            const wall12 = BABYLON.MeshBuilder.CreateBox("cross", {width:2, height:6, depth:0.2}, scene);
            wall12.rotation.y = Math.PI/2;
            wall12.position.x = -3.65;
            wall12.position.y = 3;
            wall12.position.z = 8;

            const wall13 = BABYLON.MeshBuilder.CreateBox("cross", {width:6, height:6, depth:0.2}, scene);
            wall13.rotation.y = Math.PI/2;
            wall13.position.x = -3.65;
            wall13.position.y = 3;
            wall13.position.z = 14;

            const wall14 = wall13.clone();
            wall14.position.z = 24;

            const wall15 = BABYLON.MeshBuilder.CreateBox("cross", {width:5, height:6, depth:0.2}, scene);
            wall15.rotation.y = Math.PI/2;
            wall15.position.x = -3.65;
            wall15.position.y = 3;
            wall15.position.z = 33.5;

            const wall16 = wall11.clone();
            wall16.position.x = -7;
            wall16.position.z = 5.5;

            const wall17 = BABYLON.MeshBuilder.CreateBox("cross", {width:.3, height:6, depth:0.2}, scene);
            wall17.rotation.y = Math.PI/2;
            wall17.position.x = 1.35;
            wall17.position.y = 3;
            wall17.position.z = 0.3;

            const wall18 = wall17.clone();
            wall18.position.z = 3.65;

            const wall19 = wall18.clone();
            wall19.position.z = 5.95;

            const wall20 = BABYLON.MeshBuilder.CreateBox("cross", {width:1.2, height:6, depth:1.2}, scene);
            wall20.rotation.y = Math.PI/2;
            wall20.position.x = 1.85;
            wall20.position.y = 3;
            wall20.position.z = 10.8;

            const wall21 = BABYLON.MeshBuilder.CreateBox("cross", {width:2.4, height:6, depth:0.2}, scene);
            wall21.rotation.y = Math.PI/2;
            wall21.position.x = 1.35;
            wall21.position.y = 3;
            wall21.position.z = 12.6;

            const wall22 = BABYLON.MeshBuilder.CreateBox("cross", {width:1.7, height:6, depth:0.2}, scene);
            wall22.position.x = 2.25;
            wall22.position.y = 3;   
            wall22.position.z = 3.65;            

            const wall23 = BABYLON.MeshBuilder.CreateBox("cross", {width:1, height:6, depth:0.2}, scene);
            wall23.position.x = 1.9;
            wall23.position.y = 3;
            wall23.position.z = 6;

            const wall24 = BABYLON.MeshBuilder.CreateBox("cross", {width:4, height:6, depth:0.2}, scene);
            wall24.position.x = 6.9;
            wall24.position.y = 3;
            wall24.position.z = 6;

            const wall25 = BABYLON.MeshBuilder.CreateBox("cross", {width:3.5, height:6, depth:0.2}, scene);
            wall25.rotation.y = Math.PI/2;            
            wall25.position.x = 3;
            wall25.position.y = 3;
            wall25.position.z = 2;

            const wall26 = BABYLON.MeshBuilder.CreateBox("cross", {width:4.2, height:6, depth:0.2}, scene);
            wall26.rotation.y = Math.PI/2;            
            wall26.position.x = 2.3;
            wall26.position.y = 3;
            wall26.position.z = 8.2;

            const wall27 = BABYLON.MeshBuilder.CreateBox("cross", {width:6.7, height:6, depth:0.2}, scene);
            wall27.position.x = 5.7;
            wall27.position.y = 3;   
            wall27.position.z = 11.3;

            const wall28 = BABYLON.MeshBuilder.CreateBox("cross", {width:2, height:6, depth:0.2}, scene);
            wall28.position.x = -10;
            wall28.position.y = 3;   
            wall28.position.z = 25;

            const wall29 = BABYLON.MeshBuilder.CreateBox("cross", {width:3, height:6, depth:0.2}, scene);
            wall29.position.x = 7.5;
            wall29.position.y = 3;   
            wall29.position.z = 18.8;

            const wall30 = BABYLON.MeshBuilder.CreateBox("cross", {width:.4, height:6, depth:0.2}, scene);
            wall30.rotation.y = Math.PI/2;            
            wall30.position.x = -9.1;
            wall30.position.y = 3;
            wall30.position.z = 22.3;

            const wall31 = wall30.clone();
            wall31.position.z = 24.7;

            const wall32 = BABYLON.MeshBuilder.CreateBox("cross", {width:2.5, height:6, depth:2.5}, scene);
            wall32.position.x = 7.75;
            wall32.position.y = 3;
            wall32.position.z = 1.25;

            const wall33 = wall32.clone();
            wall33.position.z = 34.75;

            const wall34 = wall32.clone();
            wall34.position.x = -9.75;
            wall34.position.z = 34.75;

            const wall35 = BABYLON.MeshBuilder.CreateBox("cross", {width:7.25, height:.25, depth:1.5}, scene);
            wall35.position.x = -7.25;
            wall35.position.y = 4.5;
            wall35.position.z = 3.25;    

            const wall36 = BABYLON.MeshBuilder.CreateBox("cross", {width:1.5, height:.25, depth:2.75}, scene);
            wall36.position.x = -10.25;
            wall36.position.y = 4.5;
            wall36.position.z = 23.5;

            const wall37 = BABYLON.MeshBuilder.CreateBox("cross", {width:2, height:6, depth:0.2}, scene);
            wall37.rotation.y = Math.PI/2;
            wall37.position.x = 5.25;
            wall37.position.y = 3;
            wall37.position.z = 1;


            const wall38 = BABYLON.MeshBuilder.CreateBox("cross", {width:1.5, height:.25, depth:2}, scene);
            wall38.position.x = 6;
            wall38.position.y = 3;
            wall38.position.z = 1;

            // ceiling
            // const roof = BABYLON.MeshBuilder.CreateBox("cross", {width:20, height:36, depth:0.2}, scene);
            // roof.rotation.x = Math.PI/2;
            // roof.position.x = -1;
            // roof.position.y = 6;
            // roof.position.z = 18;
            
            // roof.material = cross_material_big;

            wall3.material = cross_material;  
            wall1.material = wall2.material = wall4.material = wall5.material = wall6.material = wall7.material = wall8.material = wall9.material = wall10.material = wall11.material = wall12.material = wall13.material = wall14.material = wall15.material = wall16.material = wall17.material = wall18.material = wall19.material = wall20.material = wall21.material = wall22.material = wall23.material = wall24.material = wall25.material = wall26.material = wall27.material = wall28.material = wall29.material = wall30.material = wall31.material = wall32.material = wall33.material = wall34.material = wall35.material = wall36.material = wall37.material = wall38.material = cross_material_big;

            }

            const bath = buildbath();

            const toilet = buildtoilet();

            const laundry = buildlaundry();

            // const cabinet = buildcabinet();

            return scene;
        };
        
        const buildbath = () => {
          const box_bottom = BABYLON.MeshBuilder.CreateBox("box1", {width:3.4, height:0.2, depth:4.6});

          const box_side   = BABYLON.MeshBuilder.CreateBox("box2", {width:3.4, height:1.5, depth:.2});
          box_side.position.y = .65;
          box_side.position.z = 2.4;

          const box_side2 = box_side.clone();
          box_side2.position.z = -2.4;

          const box_side3   = BABYLON.MeshBuilder.CreateBox("box3", {width:0.2, height:1.5, depth:4.6});
          box_side3.position.x = 1.6;
          box_side3.position.y = .65;

          const box_side4 = box_side3.clone();
          box_side4.position.x = -1.6;   

          const bath = BABYLON.Mesh.MergeMeshes([box_bottom, box_side,box_side2,box_side3,box_side4], true, false, null, false, true)
          bath.position.x = 7.2;
          bath.position.y = .1;
          bath.position.z = 8.7;          
        }

        const buildtoilet = () => {

          const toilet_before_parts = [
            new BABYLON.Vector3(0, 0, 0),
            new BABYLON.Vector3(.8, 0, 0),
            new BABYLON.Vector3(1, 1.75, 0),
            new BABYLON.Vector3(.8, 1.75, 0),
            new BABYLON.Vector3(.65, .5, 0),
            new BABYLON.Vector3(0, .5, 0),
            new BABYLON.Vector3(0, .5, 0),
            new BABYLON.Vector3(0, .5, 0)
          ];
          
          const toilet_before = BABYLON.MeshBuilder.CreateLathe("toilet_before", {shape: toilet_before_parts, sideOrientation: BABYLON.Mesh.DOUBLESIDE});

          const toilet_after_parts = [
            new BABYLON.Vector3(-.5, 0, 0.15),
            new BABYLON.Vector3(-.25, 0, 0.3),
            new BABYLON.Vector3(0, 0, 0.35),
            new BABYLON.Vector3(.25, 0, 0.3),
            new BABYLON.Vector3(.5, 0, 0.15),
            new BABYLON.Vector3(.5, 0, 1),
            new BABYLON.Vector3(-.5, 0, 1),  
          ]

          const toilet_after = BABYLON.MeshBuilder.ExtrudePolygon("toilet_after", {shape: toilet_after_parts, depth: 1.75});     
          toilet_after.position.y = 1.75;
          toilet_after.position.z = .5;
      
          const toilet_box = BABYLON.MeshBuilder.CreateBox("toilet_box", {width:1.6, height:1.5, depth:.75});
          toilet_box.position.y = 2.5;
          toilet_box.position.z = 1.2;

          const toilet = BABYLON.Mesh.MergeMeshes([toilet_before, toilet_after, toilet_box], true, false, null, false, true);
          toilet.position.x = -5.4;
          toilet.position.y = .1;
          toilet.position.z = 4.75;
          toilet.rotation.y = Math.PI;
        }

        const buildlaundry = () => {
          const box_bottom = BABYLON.MeshBuilder.CreateBox("box1", {width:1.8, height:0.15, depth:1.7});

          const box_side   = BABYLON.MeshBuilder.CreateBox("box2", {width:1.8, height:.4, depth:.15});
          box_side.position.y = .13;
          box_side.position.z = .9;

          const box_side2 = box_side.clone();
          box_side2.position.z = -.9;

          const box_side3   = BABYLON.MeshBuilder.CreateBox("box3", {width:0.15, height:.4, depth:1.8});
          box_side3.position.x = .82;
          box_side3.position.y = .13;

          const box_side4 = box_side3.clone();
          box_side4.position.x = -.82;   

          const laundry = BABYLON.Mesh.MergeMeshes([box_bottom, box_side,box_side2,box_side3,box_side4], true, false, null, false, true)    

          laundry.position.x = 4.1;
          laundry.position.y = .1;          
          laundry.position.z = 1.2;     
        }

        // const buildcabinet = () => {

        //   const box_ground = BABYLON.MeshBuilder.CreateBox("box_ground", {width:2, height:.5, depth:3.2});
        //   box_ground.position.x = -.1;

        //   const box_bottom = BABYLON.MeshBuilder.CreateBox("box_botton", {width:2.2, height:1, depth:3.2});
        //   box_bottom.position.y = .5;

        //   const box_side   = BABYLON.MeshBuilder.CreateBox("box_side", {width:2.2, height:1.5, depth:.7});
        //   box_side.position.y = .75;
        //   box_side.position.z = 1.25;

        //   const box_side2 = box_side.clone();
        //   box_side2.position.z = -1.25;

        //   const box_side3   = BABYLON.MeshBuilder.CreateBox("box_side3", {width:0.5, height:1.5, depth:3.2});
        //   box_side3.position.x = 0.85;
        //   box_side3.position.y = .75;

        //   const box_side4 = box_side3.clone();
        //   box_side4.position.x = -0.85;  

        //   const box_top = BABYLON.MeshBuilder.CreateBox("box_top", {width:.1, height:3.5, depth:3.2});
        //   box_top.position.x = -1.05;
        //   box_top.position.y = 3.2;

        //   const box_top_before = BABYLON.MeshBuilder.CreateBox("box_top_before", {width:.1, height:3, depth:3.2});
        //   box_top_before.position.x = -.6;
        //   box_top_before.position.y = 3.45;

        //   const box_top_right = BABYLON.MeshBuilder.CreateBox("box_top_before", {width:.1, height:3, depth:.5});
        //   box_top_right.rotation.y = -Math.PI / 2;
        //   box_top_right.position.x = -.8;
        //   box_top_right.position.y = 3.45;
        //   box_top_right.position.z = 1.55;

        //   const box_top_left = box_top_right.clone();
        //   box_top_left.position.z = -1.55;

        //   const box_top_top = BABYLON.MeshBuilder.CreateBox("box_top_before", {width:.1, height:.5, depth:3});
        //   box_top_top.rotation.z = -Math.PI / 2;
        //   box_top_top.position.x = -.8;
        //   box_top_top.position.y = 4.9;

        //   const box_top_bottom = box_top_top.clone();
        //   box_top_top.position.y = 2;

        //   const cabinet = BABYLON.Mesh.MergeMeshes([box_ground,box_bottom,box_side,box_side2,box_side3,box_side4,box_top,box_top_before, box_top_right,box_top_left, box_top_top,box_top_bottom], true, false, null, false, true)   

        //   cabinet.rotation.y = -Math.PI;
        //   cabinet.position.x = 7.8;
        //   cabinet.position.z = 4.15;

        // }
        const scene = createScene();
        
        engine.runRenderLoop(() => {
          scene.render();
        });
        
        window.addEventListener('resize', () => {
          engine.resize();
        });
      }
      window.addEventListener('DOMContentLoaded', main);
    </script>
  </body>
</html>
